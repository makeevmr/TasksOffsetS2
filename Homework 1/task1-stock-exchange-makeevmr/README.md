# Фондовая биржа

Разработать информационно-справочную систему для работы биржи ценных бумаг. 

Программа взаимодействует с пользователем через стандартный ввод и вывод (потоки stdin и stdout).

База данных позволяет хранить описания сведений о заявках на покупку/продажу акций: дата и время заявки, тикер[^1], тип заявки, количество, цена. 
Здесь:
* тикер — строка не более 15 символов (не содержит знаков `,;"`);
* тип заявки — покупка или продажа акций (buy/sell);
* количество — целое число;
* цена — вещественное число.

Для каждой записи автоматически добавляется уникальный номер записи (у первой добавленной записи в базе должен быть номер 1).

Должны обрабатываться следующие команды:
* `load имя_файла_с_БД` — чтение базы данных из файла;
* `save имя_файла_с_БД` — запись базы данных в файл;
* `add дата и время заявки, тикер, тип заявки, количество, цена` — добавление заявки на покупку/продажу акций (добавление записи);
* `delete ID` — удаление записи по её уникальному номеру ID;
* `clear` — удаление всех записей из базы данных, у которых количество равно 0;
* `print` — вывод всего списка заявок, отсортированных по дате и времени заявки (по возрастанию);
* `dom TICKER` — биржевой стакан, вывод таблицы актуальных (количество больше 0) заявок на заданный тикер акций `TICKER`, отсортированных по убыванию цены (при равенстве цены сначала заявки на продажу, упорядоченные по убыванию даты и времени, а далее заявки на покупку, упорядоченные по возрастанию даты и времени);
* `export имя_файла` — вывод всего списка заявок (отсортированных по возрастанию даты и времени) в текстовый файл;
* `quit` — завершение работы.

Приглашение ко вводу команд (строка, которая отображается слева от каждой команды, которая будет вводиться в терминале) имеет вид `> ` (символ больше и пробел).

## Добавление заявок
Добавление заявок на покупку/продажу акций осуществляется с помощью команды `add`. Общий формат команды: 
```add дата_и_время_заявки, тикер, тип_заявки, количество, цена```
* `дата_и_время_заявки` вводится в формате `ДД.ММ.ГГГГ чч:мм:сс`, где 
  - `ДД` — день в виде числа от 1 до 31 или от 01 до 31;
  - `MM` — месяц в виде числа от 1 до 12 или от 01 до 12;
  - `ГГГГ` — год в виде числа от 2000 до 9999;
  - `чч` — часов в виде числа от 0 до 23 или от 01 до 23;
  - `мм` — минут в виде числа от 0 до 59 или от 01 до 59;
  - `сс` — секунд в виде числа от 1 до 59 или от 01 до 59;
* `тикер` — строка не более 15 символов (тикеры не будут содержать знаков `,;"`);
* `тип_заявки` — слово `buy` для покупки акций или слово `sell` для продажи акций.

Если в базе прусутствуют встречные заявки, то необходимо при добавлении новой записи выполнить эти заявки.
То есть, если добавляем запись на покупку 10 акций по цене 100 у.е., а в базе уже есть записи на продажу 4 акций с таким же тикером по цене 98 у.е. и 5 акций по цене 95 у.е.,
то необходимо добавить запись на покупку только 1 акции (10-4-5=1), а в записях на продажу исправить количество соответственно на 0 (то есть заявки были выполнены).

Аналогичным образом для заявок на продажу: если добавляем запись на продажу 10 акций по цене 90 у.е., а в базе уже присутвуют записи на покупку 6 акций по цене 93 у.е. и 10 акций по цене 92 у.е.,
то необходимо добавить запись на продажу 0 акций (то есть сразу выполнить заявку), а в записях на покупку изменить количество, соответственно, на 0 акций (по цене 93 у.е.) и на 4 акции (по цене 92 у.е.).

Поиск должен быть регистронезависимым (например, одинаковыми являются тикеры `Tesla`, `TESLA`, `teSla`).

### Пример команды
Заявка на покупку 5  акций Tesla за 125.54 у.е.:
```add 13.02.2023 10:00, Tesla, buy, 5, 125.54```


## Обработка ошибок ввода
Если пользователь ввёл неизвестную команду, то программа должна об этом сообщить, выведя строку `Unknown command: C O M M A N D`, где `C O M M A N D` — это та команда, которую ввёл пользователь. Командой считается первое слово в строке (до пробела или конца строки).

Если пользователь ввёл дату в неверном формате там, где она ожидалась, то программа должна напечатать `Wrong date format: D A T E`, где `D A T E` — это то, что пользователь ввёл вместо даты.

Если формат даты верный, но сама дата неверна, то программа должна напечатать более конкретную проблему: `Month value is invalid: M O N T H`, где `M O N T H` — это неверный номер месяца, например, 13 или 0. `Day value is invalid: D A Y`, где `D A Y` — это неверный номер дня в месяце, например, 32 или 0.

Если пользователь ввёл время в неверном формате там, где оно ожидалась, то программа должна напечатать `Wrong time format: T I M E`, где `T I M E` — это то, что пользователь ввёл вместо времени.

Если формат времени верный, но само время неверно, то программа должна напечатать более конкретную проблему: `Time value is invalid: T I M E`, где `T I M E` — это введенное пользователем время, например, `25:01:00` или `10:76:00`.

Если пользователь ввел неизвестный тип заявки, то программа должна об этом сообщить, выведя строку `Unknown command: O R D E R`, где `O R D E R` — это тот неизвестный тип заявки, который ввёл пользователь (символы до ближайшего знака `,`).

В остальных случаях, если пользователь ввёл неправильную команду, то выводить строку `Unknown command`. 

Если при чтении базы данных из файла пользователь указал несуществующий файл, то вывести строку `Can not open database`.

Если при записи базы данных в файл пользователь неправильно указал имя файла файл, то вывести строку `Can not write to file`.

## Формат вывода

При выводе списков элементы записи разделяются запятыми. 
* Формат вывода записи для команды `print`: `ID, дата и время заявки, тикер, тип заявки, количество, цена`.
* Формат вывода записи для команды `dom`: `тип заявки, цена, количество, дата и время заявки`.
* Формат вывода записи для команды `export`: `дата и время заявки, тикер, тип заявки, количество, цена`.

Формат вывода даты и времени: `ГГГГ.ММ.ДД чч:мм:сс`, где 
* `ДД` — день в виде числа от 01 до 31;
* `MM` — месяц в виде числа от 01 до 12;
* `ГГГГ` — год в виде числа от 0 до 9999;
* `чч` — часов в виде числа от 01 до 23;
* `мм` — минут в виде числа от 01 до 59;
* `сс` — секунд в виде числа от 01 до 59.

Формат вывода цены: два знака после запятой.

## Требования к реализации
Программа не должна использовать контейнеры STL (std::vector, std::string и т. д.). 

[^1]: Тикер — краткое название котируемых инструментов (акций, облигаций, индексов). Является уникальным идентификатором в рамках одной биржи или информационной системы. 
